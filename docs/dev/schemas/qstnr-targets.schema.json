{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "https://qstnr.rpkg.dev/dev/schemas/qstnr-targets.schema.json",
  "title": "qstnr targets specification",
  "description": "qstnr specification part: respondent target groups",
  "type": "object",
  "patternProperties": {
    "^[A-Za-z_][A-Za-z0-9_]*$": {
      "description": "target group definition",
      "type": "object",
      "properties": {
        "i": {
          "description": "target iterators",
          "type": "array",
          "items": {
            "description": "target iterator",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true
          },
          "minItems": 1,
          "uniqueItems": true
        },
        "id": {
          "description": "target group identifier",
          "type": "string",
          "pattern": "^[A-Za-z_][A-Za-z0-9_.{}]*$"
        },
        "title": {
          "description": "target group title",
          "type": "object",
          "patternProperties": {
            "^[a-z]{2}$": {
              "type": "string",
              "minLength": 1
            }
          },
          "minProperties": 1,
          "additionalProperties": false
        },
        "description": {
          "description": "target group description",
          "type": "object",
          "patternProperties": {
            "^[a-z]{2}$": {
              "type": "string",
              "minLength": 1
            }
          },
          "minProperties": 1,
          "additionalProperties": false
        },
        "filter": {
          "description": "target group `dplyr::filter()` expressions",
          "type": "object",
          "properties": {
            "positive": {
              "description": "`dplyr::filter()` R expression including target group only",
              "type": "string",
              "minLength": 1
            },
            "negative": {
              "description": "`dplyr::filter()` R expression excluding target group only",
              "type": "string",
              "minLength": 1
            }
          },
          "minProperties": 1,
          "additionalProperties": false
        }
      },
      "required": ["id", "title", "description", "filter"],
      "additionalProperties": false
    }
  },
  "minProperties": 1,
  "additionalProperties": false
}
